using System;
using System.Collections.Generic;
using System.Drawing;
using System.Windows.Forms;
using Week4_AbstractFactory_Library;

namespace Week4_AbstractFactory_Form
{
    public partial class AbstractFactoryForm : Form
    {
        private bool _isDrawingCharacter = true;
        private IGameFactory _factory;
        private ICharacter _character;
        private IHousing _housing;

        public AbstractFactoryForm()
        {
            InitializeComponent();
            _factory = new SmurfFactory();
        }

        private void btnCreateCharacter_Click(object sender, EventArgs e)
        {
            btnAddHousing.BackColor = Control.DefaultBackColor;
            btnCreateCharacter.BackColor = Color.IndianRed;
            _isDrawingCharacter = true;
        }

        private void btnAddHousing_Click(object sender, EventArgs e)
        {
            btnAddHousing.BackColor = Color.IndianRed;
            btnCreateCharacter.BackColor = Control.DefaultBackColor;
            _isDrawingCharacter = false;
        }

        private void pnlDraw_MouseClick(object sender, MouseEventArgs e)
        {
            Point point = e.Location;
            point.X -= 50;
            point.Y -= 50;
            if (_isDrawingCharacter)
            {
                ICharacter character = _factory.CreateCharacter();
                character.DrawCharacter(pnlDraw.CreateGraphics(), point);
                this._character = character;
            }
            else
            {
                IHousing housing = _factory.CreateHousing();
                housing.DrawHousing(pnlDraw.CreateGraphics(), point);
                this._housing = housing;
            }
        }

        private void rbSmurf_Click(object sender, EventArgs e)
        {
            rbHawks.Checked = false;
            rbSmurf.Checked = true;
            _factory = new SmurfFactory();
            pnlDraw.Refresh();
            AddMessage("You are now using a SMURF facotry");
        }

        private void rbHawks_Click(object sender, EventArgs e)
        {
            rbHawks.Checked = true;
            rbSmurf.Checked = false;
            _factory = new HawkFactory();
            pnlDraw.Refresh();
            AddMessage("You are now using a HAWK facotry");
        }

        private void btnGreet_Click(object sender, EventArgs e)
        {
            if (_character == null) AddMessage("Please create at least one character first");
            AddMessage(this._character.Greet());
        }

        private void btnFly_Click(object sender, EventArgs e)
        {
            if (_character == null) AddMessage("Please create at least one character first");
            AddMessage(this._character.Fly());
        }

        private void btnSwim_Click(object sender, EventArgs e)
        {
            if (_character == null) AddMessage("Please create at least one character first");
            AddMessage(this._character.Swim()); ;
        }

        private void AddMessage(string message)
        {
            this.rbMessages.Text = string.Format("[{0}]\r\n{1}\r\n{2}",
                DateTime.Now.ToLongTimeString(),
                message,
                this.rbMessages.Text);
        }
    }
}namespace Week4_AbstractFactory_Form
{
    partial class AbstractFactoryForm
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.btnCreateCharacter = new System.Windows.Forms.Button();
            this.btnAddHousing = new System.Windows.Forms.Button();
            this.rbSmurf = new System.Windows.Forms.RadioButton();
            this.rbHawks = new System.Windows.Forms.RadioButton();
            this.pnlDraw = new System.Windows.Forms.Panel();
            this.rbMessages = new System.Windows.Forms.RichTextBox();
            this.lblOutput = new System.Windows.Forms.Label();
            this.btnGreet = new System.Windows.Forms.Button();
            this.btnFly = new System.Windows.Forms.Button();
            this.btnSwim = new System.Windows.Forms.Button();
            this.SuspendLayout();
            // 
            // btnCreateCharacter
            // 
            this.btnCreateCharacter.BackColor = System.Drawing.Color.IndianRed;
            this.btnCreateCharacter.Location = new System.Drawing.Point(140, 10);
            this.btnCreateCharacter.Name = "btnCreateCharacter";
            this.btnCreateCharacter.Size = new System.Drawing.Size(108, 23);
            this.btnCreateCharacter.TabIndex = 2;
            this.btnCreateCharacter.Text = "Add Character";
            this.btnCreateCharacter.UseVisualStyleBackColor = false;
            this.btnCreateCharacter.Click += new System.EventHandler(this.btnCreateCharacter_Click);
            // 
            // btnAddHousing
            // 
            this.btnAddHousing.Location = new System.Drawing.Point(254, 10);
            this.btnAddHousing.Name = "btnAddHousing";
            this.btnAddHousing.Size = new System.Drawing.Size(108, 23);
            this.btnAddHousing.TabIndex = 3;
            this.btnAddHousing.Text = "Add Housing";
            this.btnAddHousing.UseVisualStyleBackColor = true;
            this.btnAddHousing.Click += new System.EventHandler(this.btnAddHousing_Click);
            // 
            // rbSmurf
            // 
            this.rbSmurf.AutoSize = true;
            this.rbSmurf.Checked = true;
            this.rbSmurf.Location = new System.Drawing.Point(13, 13);
            this.rbSmurf.Name = "rbSmurf";
            this.rbSmurf.Size = new System.Drawing.Size(57, 17);
            this.rbSmurf.TabIndex = 4;
            this.rbSmurf.TabStop = true;
            this.rbSmurf.Text = "Smurfs";
            this.rbSmurf.UseVisualStyleBackColor = true;
            this.rbSmurf.Click += new System.EventHandler(this.rbSmurf_Click);
            // 
            // rbHawks
            // 
            this.rbHawks.AutoSize = true;
            this.rbHawks.Location = new System.Drawing.Point(76, 13);
            this.rbHawks.Name = "rbHawks";
            this.rbHawks.Size = new System.Drawing.Size(58, 17);
            this.rbHawks.TabIndex = 5;
            this.rbHawks.Text = "Hawks";
            this.rbHawks.UseVisualStyleBackColor = true;
            this.rbHawks.Click += new System.EventHandler(this.rbHawks_Click);
            // 
            // pnlDraw
            // 
            this.pnlDraw.BackColor = System.Drawing.SystemColors.Window;
            this.pnlDraw.BorderStyle = System.Windows.Forms.BorderStyle.FixedSingle;
            this.pnlDraw.Location = new System.Drawing.Point(13, 37);
            this.pnlDraw.Name = "pnlDraw";
            this.pnlDraw.Size = new System.Drawing.Size(622, 547);
            this.pnlDraw.TabIndex = 6;
            this.pnlDraw.MouseClick += new System.Windows.Forms.MouseEventHandler(this.pnlDraw_MouseClick);
            // 
            // rbMessages
            // 
            this.rbMessages.Location = new System.Drawing.Point(642, 37);
            this.rbMessages.Name = "rbMessages";
            this.rbMessages.Size = new System.Drawing.Size(427, 547);
            this.rbMessages.TabIndex = 7;
            this.rbMessages.Text = "";
            // 
            // lblOutput
            // 
            this.lblOutput.AutoSize = true;
            this.lblOutput.Font = new System.Drawing.Font("Microsoft Sans Serif", 12F, System.Drawing.FontStyle.Bold, System.Drawing.GraphicsUnit.Point, ((byte)(0)));
            this.lblOutput.Location = new System.Drawing.Point(833, 13);
            this.lblOutput.Name = "lblOutput";
            this.lblOutput.Size = new System.Drawing.Size(64, 20);
            this.lblOutput.TabIndex = 8;
            this.lblOutput.Text = "Output";
            // 
            // btnGreet
            // 
            this.btnGreet.Location = new System.Drawing.Point(369, 10);
            this.btnGreet.Name = "btnGreet";
            this.btnGreet.Size = new System.Drawing.Size(76, 23);
            this.btnGreet.TabIndex = 9;
            this.btnGreet.Text = "Greet";
            this.btnGreet.UseVisualStyleBackColor = true;
            this.btnGreet.Click += new System.EventHandler(this.btnGreet_Click);
            // 
            // btnFly
            // 
            this.btnFly.Location = new System.Drawing.Point(464, 10);
            this.btnFly.Name = "btnFly";
            this.btnFly.Size = new System.Drawing.Size(76, 23);
            this.btnFly.TabIndex = 10;
            this.btnFly.Text = "Fly";
            this.btnFly.UseVisualStyleBackColor = true;
            this.btnFly.Click += new System.EventHandler(this.btnFly_Click);
            // 
            // btnSwim
            // 
            this.btnSwim.Location = new System.Drawing.Point(559, 10);
            this.btnSwim.Name = "btnSwim";
            this.btnSwim.Size = new System.Drawing.Size(76, 23);
            this.btnSwim.TabIndex = 11;
            this.btnSwim.Text = "Swim";
            this.btnSwim.UseVisualStyleBackColor = true;
            this.btnSwim.Click += new System.EventHandler(this.btnSwim_Click);
            // 
            // AbstractFactoryForm
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(1075, 596);
            this.Controls.Add(this.btnSwim);
            this.Controls.Add(this.btnFly);
            this.Controls.Add(this.btnGreet);
            this.Controls.Add(this.lblOutput);
            this.Controls.Add(this.rbMessages);
            this.Controls.Add(this.pnlDraw);
            this.Controls.Add(this.rbHawks);
            this.Controls.Add(this.rbSmurf);
            this.Controls.Add(this.btnAddHousing);
            this.Controls.Add(this.btnCreateCharacter);
            this.Name = "AbstractFactoryForm";
            this.StartPosition = System.Windows.Forms.FormStartPosition.CenterScreen;
            this.Text = "Game with Abstract Factory";
            this.ResumeLayout(false);
            this.PerformLayout();

        }

        #endregion

        private System.Windows.Forms.Button btnCreateCharacter;
        private System.Windows.Forms.Button btnAddHousing;
        private System.Windows.Forms.RadioButton rbSmurf;
        private System.Windows.Forms.RadioButton rbHawks;
        private System.Windows.Forms.Panel pnlDraw;
        private System.Windows.Forms.RichTextBox rbMessages;
        private System.Windows.Forms.Label lblOutput;
        private System.Windows.Forms.Button btnGreet;
        private System.Windows.Forms.Button btnFly;
        private System.Windows.Forms.Button btnSwim;
    }
}

using System;
using System.Windows.Forms;

namespace Week4_AbstractFactory_Form
{
    internal static class Program
    {
        /// <summary>
        /// The main entry point for the application.
        /// </summary>
        [STAThread]
        private static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new AbstractFactoryForm());
        }
    }
}
using System.Reflection;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("Week4_AbstractFactory_Form")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("Week4_AbstractFactory_Form")]
[assembly: AssemblyCopyright("Copyright ©  2017")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible
// to COM components.  If you need to access a type in this assembly from
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("7f5f7584-0d36-42aa-bb19-887638befdfd")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")]
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Week4_AbstractFactory_Form.Properties
{


    /// <summary>
    ///   A strongly-typed resource class, for looking up localized strings, etc.
    /// </summary>
    // This class was auto-generated by the StronglyTypedResourceBuilder
    // class via a tool like ResGen or Visual Studio.
    // To add or remove a member, edit your .ResX file then rerun ResGen
    // with the /str option, or rebuild your VS project.
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("System.Resources.Tools.StronglyTypedResourceBuilder", "4.0.0.0")]
    [global::System.Diagnostics.DebuggerNonUserCodeAttribute()]
    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    internal class Resources
    {

        private static global::System.Resources.ResourceManager resourceMan;

        private static global::System.Globalization.CultureInfo resourceCulture;

        [global::System.Diagnostics.CodeAnalysis.SuppressMessageAttribute("Microsoft.Performance", "CA1811:AvoidUncalledPrivateCode")]
        internal Resources()
        {
        }

        /// <summary>
        ///   Returns the cached ResourceManager instance used by this class.
        /// </summary>
        [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
        internal static global::System.Resources.ResourceManager ResourceManager
        {
            get
            {
                if ((resourceMan == null))
                {
                    global::System.Resources.ResourceManager temp = new global::System.Resources.ResourceManager("Week4_AbstractFactory_Form.Properties.Resources", typeof(Resources).Assembly);
                    resourceMan = temp;
                }
                return resourceMan;
            }
        }

        /// <summary>
        ///   Overrides the current thread's CurrentUICulture property for all
        ///   resource lookups using this strongly typed resource class.
        /// </summary>
        [global::System.ComponentModel.EditorBrowsableAttribute(global::System.ComponentModel.EditorBrowsableState.Advanced)]
        internal static global::System.Globalization.CultureInfo Culture
        {
            get
            {
                return resourceCulture;
            }
            set
            {
                resourceCulture = value;
            }
        }
    }
}
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace Week4_AbstractFactory_Form.Properties
{


    [global::System.Runtime.CompilerServices.CompilerGeneratedAttribute()]
    [global::System.CodeDom.Compiler.GeneratedCodeAttribute("Microsoft.VisualStudio.Editors.SettingsDesigner.SettingsSingleFileGenerator", "11.0.0.0")]
    internal sealed partial class Settings : global::System.Configuration.ApplicationSettingsBase
    {

        private static Settings defaultInstance = ((Settings)(global::System.Configuration.ApplicationSettingsBase.Synchronized(new Settings())));

        public static Settings Default
        {
            get
            {
                return defaultInstance;
            }
        }
    }
}
using System;
using System.Drawing;

namespace Week4_AbstractFactory_Library
{
    internal class Hawk : ICharacter
    {
        public double WingSpan { get; set; }
        public int Height { get; set; }

        public Hawk(double wingSpan)
        {
            this.WingSpan = wingSpan;
        }

        public string Greet()
        {
            return "haw haw";
        }

        public string Fly()
        {
            Height += new Random().Next(0, 10);
            return String.Format("Look at me with my {0} wingspan - magnificent! Currently cruising at {1}m in the sky", this.WingSpan, this.Height);
        }

        public string Swim()
        {
            return "Hawks can't swim ...";
        }

        public void DrawCharacter(Graphics graphics, Point point)
        {
            Rectangle r = new Rectangle(point, new Size(100, 100));
            graphics.DrawImage(Image.FromFile("hawk.png"), r);
        }
    }
}
using System;

namespace Week4_AbstractFactory_Library
{
    public class HawkFactory : IGameFactory
    {
        public HawkFactory()
        {
        }

        public ICharacter CreateCharacter()
        {
            return new Hawk(new Random().Next(2, 30));
        }

        public IHousing CreateHousing()
        {
            return new HawkHouse();
        }
    }
}
using System.Drawing;

namespace Week4_AbstractFactory_Library
{
    internal class HawkHouse : IHousing
    {
        public HawkHouse()
        {
        }

        public void DrawHousing(Graphics graphics, Point point)
        {
            Rectangle r = new Rectangle(point, new Size(100, 100));
            graphics.DrawImage(Image.FromFile("hawk_house.png"), r);
        }

        public string DescribeHousing()
        {
            return "A dangerous hawk's nest, with an egg in it!";
        }
    }
}
using System.Drawing;

namespace Week4_AbstractFactory_Library
{
    public interface ICharacter
    {
        string Greet();

        string Fly();

        string Swim();

        void DrawCharacter(Graphics graphics, Point point);
    }
}
namespace Week4_AbstractFactory_Library
{
    public interface IGameFactory
    {
        ICharacter CreateCharacter();

        IHousing CreateHousing();
    }
}
using System.Drawing;

namespace Week4_AbstractFactory_Library
{
    public interface IHousing
    {
        void DrawHousing(Graphics graphics, Point point);

        string DescribeHousing();
    }
}
using System.Reflection;
using System.Runtime.InteropServices;

// General Information about an assembly is controlled through the following
// set of attributes. Change these attribute values to modify the information
// associated with an assembly.
[assembly: AssemblyTitle("Week4_AbstractFactory_Library")]
[assembly: AssemblyDescription("")]
[assembly: AssemblyConfiguration("")]
[assembly: AssemblyCompany("")]
[assembly: AssemblyProduct("Week4_AbstractFactory_Library")]
[assembly: AssemblyCopyright("Copyright ©  2017")]
[assembly: AssemblyTrademark("")]
[assembly: AssemblyCulture("")]

// Setting ComVisible to false makes the types in this assembly not visible
// to COM components.  If you need to access a type in this assembly from
// COM, set the ComVisible attribute to true on that type.
[assembly: ComVisible(false)]

// The following GUID is for the ID of the typelib if this project is exposed to COM
[assembly: Guid("8f2e932c-b2b6-4865-8359-d374e0ebd578")]

// Version information for an assembly consists of the following four values:
//
//      Major Version
//      Minor Version
//      Build Number
//      Revision
//
// You can specify all the values or you can default the Build and Revision Numbers
// by using the '*' as shown below:
// [assembly: AssemblyVersion("1.0.*")]
[assembly: AssemblyVersion("1.0.0.0")]
[assembly: AssemblyFileVersion("1.0.0.0")]
using System;
using System.Drawing;

namespace Week4_AbstractFactory_Library
{
    internal class Smurf : ICharacter
    {
        public int Greetings { get; set; }
        public int DistanceSwam { get; set; }

        public Smurf()
        {
        }

        public string Greet()
        {
            Greetings++;
            return $"Hello, I am a Smurf! I've met {Greetings} new people today!";
        }

        public string Fly()
        {
            return "I am a smurf, I CAN'T fly :(";
        }

        public string Swim()
        {
            DistanceSwam += new Random().Next(1, 100);
            return $"Phew, I am tired of swimming! I swam {DistanceSwam}m";
        }

        public void DrawCharacter(Graphics graphics, Point point)
        {
            Rectangle r = new Rectangle(point, new Size(100, 100));
            graphics.DrawImage(Image.FromFile("smurf.png"), r);
        }
    }
}
namespace Week4_AbstractFactory_Library
{
    public class SmurfFactory : IGameFactory
    {
        public ICharacter CreateCharacter()
        {
            return new Smurf();
        }

        public IHousing CreateHousing()
        {
            return new SmurfHouse();
        }
    }
}
using System.Drawing;

namespace Week4_AbstractFactory_Library
{
    internal class SmurfHouse : IHousing
    {
        public SmurfHouse()
        {
        }

        public void DrawHousing(Graphics graphics, Point point)
        {
            Rectangle r = new Rectangle(point, new Size(100, 100));
            graphics.DrawImage(Image.FromFile("smurf_house.png"), r);
        }

        public string DescribeHousing()
        {
            return "Ah ... look a nice smurf house!";
        }
    }
}
